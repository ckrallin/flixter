function addActiveLink(){var a=location.href,e=a.lastIndexOf("/"),t=a.length,i=a.substring(e+1,t);i.includes("courses")?$("#bootcamp-prep-dropdown-link").addClass("-active_link"):i.includes("community")?$("#community-link").addClass("-active_link"):i.includes("student-support")?$("#student-support-link").addClass("-active_link"):i.includes("timeline")?$("#timeline-link").addClass("-active_link"):i.includes("preview-full-program")&&$("#preview-full-program-link").addClass("-active_link")}function hoverHandlerForPrepCourseDropdown(){var a="#bootcamp-prep-dropdown-link";$(".dropdown.left-nav-item").hover(function(e){$(a).hasClass("-active_link")&&!$(a).hasClass("-hide_active_link")?$(a).addClass("-hide_active_link"):$(a).hasClass("-active_link")&&$(a).hasClass("-hide_active_link")&&$(a).removeClass("-hide_active_link")}),$("#bootcamp-prep-dropdown-menu").hover(function(e){$(a).hasClass("-active_link")&&!$(a).hasClass("-hide_active_link")&&"bootcamp-prep-dropdown-menu"==e.target.id&&$(a).addClass("-hide_active_link")})}function markNotificationAsClicked(){$(".mark_as_clicked_notification").click(function(){var a=$(this),e=a.data("id");updateClicked(e,function(t){var i=document.getElementById(e);null!==i&&(i.className="drop-down",i.id="");var n=a.parent();n.fadeOut(100)})})}function updateClicked(a,e){$.ajax({url:"/update_clicked",data:{id:a},type:"PUT"}).success(e)}function setSiteTitle(a){"0"!==a&&""!==a&&0!==a?document.title="("+a+") "+title:document.title=title}function loadNotificationsToBell(a){var e=$("#top-nav-bell-drop-down");if(e.append("<div id='addNotifications'></div>"),a.length<=0)$("#addNotifications").prepend("<div id='noNotifications' class=drop-down>You don't have any notifications yet, but we'll put important information here.</div>");else for(i=a.length-1;i>=0;i--)e.append(setupNotification(a[i])),a[i]["clicked?"]===!1&&$("#"+a[i].id).addClass("unclicked")}function addNewNotificationToBell(a){$("#noNotifications").remove(),$.get(a).success(function(a){var e=a.length-1,t=a[e],i=$("#top-nav-bell-drop-down > div").map(function(){return this.id}),n=t.id.toString();$.inArray(n,i)===-1&&($("#addNotifications").prepend(setupNotification(t)),t["clicked?"]===!1&&$("#"+t.id).addClass("unclicked"))})}function setupNotification(a){var e,t,i="",n="",o="",d=" ",r=a.id+"-link",l="";a.plain_text&&null!==a.plain_text&&(o=a.plain_text+d),"/"!==a.path[0]&&(n="_blank",l='<span class="hidden-text"> Opens in new tab </span>'),"permanent"===a.notification_type&&(i='<img src="/assets/icons/exclamation-b12df24a05d67531e26e46759bdad1916922d6e9afb525eeceaa8cfc0683c67f.png" class="important-notification">'),t=$.timeago(a.created_at);var s="<div class=drop-down id ="+a.id+">"+i+"<span class='notification-title' >"+a.title+d+"</span>"+o+"<a href ="+a.path+" id = "+r+" target="+n+">"+a.description+l+"</a><br/><span class='notification-date'>"+t+"</span></div>";return s}function firebaseNotificationSubscription(a,e){var t=$("#notification-number"),i={apiKey:t.data("firebaseKey"),authDomain:t.data("firebaseAuth"),databaseURL:t.data("firebaseDatabase"),storageBucket:t.data("firebaseStorage"),messagingSenderId:t.data("firebaseMessaging")};firebase.initializeApp(i);var n=firebase.database(),o=firebase.database().ref("users/"+t.data("firebaseChannel"));o.on("value",function(t){if(t.val())var i=t.val().notification_count;else var i=e;t.val()&&i>0&&addNewNotificationToBell(a),showNotificationCountForBell(i)})}function showNotificationCountForBell(a){var e=$("#notification-number");e.text(a),0===a||"0"===a?(e.addClass("hide-number"),document.title=title):(e.removeClass("hide-number"),document.title="("+a+") "+title)}function updateNotificationCountForUser(){$.ajax({url:"/users/update_notification_count",data:{user:{notification_count:0}},type:"PUT"})}function setupNotificationBellClickHandler(){$("#top-nav-bell-drop-down").click(function(a){if(""!==a.target.id){var e=a.target.id;"top-nav-bell-drop-down"!==a.target.parentElement.id&&(e=a.target.parentElement.id),updateClicked(e,function(){document.getElementById(e).className="drop-down"})}})}function clickHandlerForDropDowns(){$("html").click(function(a){"topnav-user-name"===a.target.id||"topnav-user-avatar"==a.target.id||"topnav-user-caret"==a.target.id?(hideBellDropDown(),$("#user-profile-dropdown").toggle(),$("#topnav-user-name").attr("aria-expanded",!JSON.parse($("#topnav-user-name").attr("aria-expanded")||!1)),$("#topnav-user-avatar").attr("aria-expanded",!JSON.parse($("#topnav-user-avatar").attr("aria-expanded")||!1)),$("#topnav-user-caret").attr("aria-expanded",!JSON.parse($("#topnav-user-caret").attr("aria-expanded")||!1))):"top-nav-bell"===a.target.id||"notification-number"===a.target.id?(hideSignOutDropDown(),updateNotificationCountForUser(),$("#top-nav-bell-drop-down").toggle(),$(".top-nav-bell-drop-down-holder").toggle(),$("#top-nav-bell").attr("aria-expanded",!JSON.parse($("#top-nav-bell").attr("aria-expanded")||!1)),$("#notification-number").attr("aria-expanded",!JSON.parse($("#notification-number").attr("aria-expanded")||!1))):(hideSignOutDropDown(),hideBellDropDown())})}function escapeHandlerForDropDowns(){$("html").keydown(function(a){27==event.keyCode&&(hideSignOutDropDown(),hideBellDropDown())})}function hideBellDropDown(){$("#top-nav-bell-drop-down").hide(),$(".top-nav-bell-drop-down-holder").hide(),$("#top-nav-bell").attr("aria-expanded",!1),$("#notification-number").attr("aria-expanded",!1)}function hideSignOutDropDown(){$("#user-profile-dropdown").hide(),$("#topnav-user-name").attr("aria-expanded",!1),$("#topnav-user-avatar").attr("aria-expanded",!1),$("#topnav-user-caret").attr("aria-expanded",!1)}$(function(){addActiveLink(),markNotificationAsClicked(),clickHandlerForDropDowns(),escapeHandlerForDropDowns(),setupNotificationBellClickHandler(),hoverHandlerForPrepCourseDropdown()});